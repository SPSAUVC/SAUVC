import cv2
import numpy as np
import math
import argparse
import matplotlib.pyplot as plt


#Helps you brighten your video feed when light (gamma) is low

cam = cv2.VideoCapture(0)

def gamCorrected(hsv):
    hue, sat, val = cv2.split(hsv)
    
    mid = 0.5
    mean = np.mean(val)
    gamma = math.log(mid*255)/math.log(mean)
    
    print("Gamma reading:" , str(gamma))
    
    #convert to 255
    val_gamma = np.power(val, gamma).clip(0,255).astype(np.uint8) 
    hsv_gamma = cv2.merge([hue, sat, val_gamma])
    img_gamma2 = cv2.cvtColor(hsv_gamma, cv2.COLOR_HSV2BGR)

    return img_gamma2


while True:
    _, frame = cam.read()
               
    hsv = cv2.cvtColor(frame, cv2.COLOR_BGR2HSV)
    
    img_gamma2 = gamCorrected(hsv)
    
    cv2.imshow('Cam', frame)
    cv2.imshow('gamCorrected cam', img_gamma2)

    key = cv2.waitKey(1) & 0xFF
    if key == ord(" "):
        break
    
cv2.destroyAllWindows()
cam.release()







